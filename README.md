# Crypto Push Proposals

## Push link format

Push-link part - это уникальная строка любой длины, которая состоит из символов набора url-safe. Эта строка может быть частью ссылки. Строка участвует в преобразовании из которого всегда должна получаться одинаковая seed phrase. 
Кошелек опционально может содержать пароль (строка символов произвольной длины). Пароль никогда не должен покидать устройства пользователя. 

Возможная схема:
1. Склеиваем в единую строку нашу push-link part и опциональный пароль введенный пользователем (между линком и паролем не должно быть никаких разделительных символов) 
2. От этой строки вычисляем криптостойкий хэш (sha256)
   Возможно лучше взять какой-то более медленный алгоритм допустим PBKDF2, это позволит сделать перебор затратным (но кошелек будет генерироваться 5-10 секунд), либо взять какое-то количество итераций sha256
3. Полученный хэш используем в качестве entropy для Bitcoin Mnemonic (bip39) -> получаем "mnemonic seed phrase"
4. Из seed phrase получаем Minter Wallet

Весь описанный процесс можно реализовать на стороне клиента по технологии ligth wallet.


## Frontend functions

Методы, которые должны быть реализованы в клиентском интерфейсе:
1. Формирование простой транзакции перевода средств на указанный кошелек
   Метод должен формировать транзакцию, подписывать ее приватным ключом пользователя и возвращать raw transaction в виде hex строки
2. Получение баланса пользователя по адресу кошелька


## Minimal backend api

Методы, которые должны быть реализованы на backend:
1. Отправка raw transaction. Клиентский интерфейс формирует транзакцию, подписывает ее и в виде hex-строки отправляется на сервер. Сервер через своё подключение к ноде отправляет ее в сеть. 
2. Получение списка сервисов. В ответ на клиентский запрос приходит список сервисов с вариантами доступными для трат. Каждый вариант должен содержать название, описание и цену в BIP.
3. Формирование "заказа". В ответ на запрос сервер должен вернуть идентификатор заказа, стоимость в BIP, адрес для перевода средств.
4. Оплата и проверка статуса "заказа". Сервер должен по идентификатору заказа проверить поступление средств, запросить "товар" у провайдера и передать его клиенту.

